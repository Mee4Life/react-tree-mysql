{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\React\\\\tree-mysql\\\\src\\\\Components\\\\branches\\\\BranchView.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport List from './list/List';\nimport { Link } from 'react-router-dom';\nimport RightPanel from '../rightSide/RightPanel';\nimport FlashCard from './FlashCard';\nimport Quizlet from './Quizlet';\nimport { tokenPatch, AsyncForEach, tokenGet, date1, axiosTokenHeader } from '../../utils/functions';\nimport axios from 'axios';\n\nfunction BranchView(props) {\n  _s();\n\n  const {\n    isDark,\n    data,\n    apiBase,\n    setUpToDate,\n    fontSize,\n    p,\n    branch\n  } = props;\n  let {\n    ex\n  } = props;\n  const {\n    getCls\n  } = p;\n  const {\n    freshBranches\n  } = ex;\n  const [sBranches, setSBranches] = useState([]);\n  const [moveTarget, setMoveTarget] = useState('');\n  const [resMsg, setResMsg] = useState(null);\n  const [isFlashCard, setIsFlashCard] = useState(false);\n  const [isQuizlet, setIsQuizlet] = useState(false);\n  const [isAction, setIsAction] = useState(false);\n  const [parents, setParent] = useState([]);\n  const [origin, setOrigin] = useState(false);\n  let branchTitle = [];\n  if (branch && branch.name) branchTitle = branch.name.split('\\n');\n\n  const createDate = () => {\n    if (!branch || !branch.created_at) return '';\n    const date = new Date(branch.created_at);\n    const typed = date1(date);\n    return typed;\n  };\n\n  const flashCardReq = () => {\n    setIsAction(true);\n    setIsFlashCard(true);\n    setIsQuizlet(false);\n  };\n\n  const quizletReq = () => {\n    setIsAction(true);\n    setIsQuizlet(true);\n    setIsFlashCard(false);\n  };\n\n  const bOrigin = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('BNBKece'),\n      children: [origin && /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\" + origin.id,\n        className: `link ${isDark ? \"dark-link\" : \"light-link\"}`,\n        children: origin.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this), !origin && /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: `link ${isDark ? \"dark-link\" : \"light-link\"}`,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 94\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  };\n\n  const listActions = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('container'),\n      children: p.navSts.isVisibleNav && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('branch-list-header-actions'),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('list-action'),\n          onClick: () => {\n            flashCardReq();\n          },\n          children: \"flash card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('list-action'),\n          onClick: () => {\n            quizletReq();\n          },\n          children: \"Quizlet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  };\n\n  const getCommand = () => {\n    if (data.command) return '#' + data.command;\n    return '';\n  };\n\n  const getList = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('gDhZZyqJTsAcIbvq'),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('time'),\n        children: createDate()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('parentW1'),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('U7q'),\n          children: parents.length > 0 && parents.map(parent => /*#__PURE__*/_jsxDEV(Link, {\n            to: '/' + parent._id,\n            className: getCls('link') + ' VH9sY',\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mDCcQ\",\n              children: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"JpN\",\n              children: parent.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 33\n            }, this)]\n          }, parent._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('branch-list-header'),\n        style: {\n          textAlign: `${p.listAlign}`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\" \", branchTitle.map(e => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: getCls('branch-list-title'),\n            children: e\n          }, getRandId(), false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this)), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('YmOebB8'),\n          children: getCommand()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), data.children && /*#__PURE__*/_jsxDEV(List, {\n        branches: data.children,\n        isDark: isDark,\n        location: data.id,\n        apiBase: apiBase,\n        setUpToDate: setUpToDate,\n        fontSize: fontSize,\n        p: p,\n        ex: ex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this), !data.children && /*#__PURE__*/_jsxDEV(List, {\n        branches: data,\n        isDark: isDark,\n        location: data.id,\n        apiBase: apiBase,\n        setUpToDate: setUpToDate,\n        fontSize: fontSize,\n        p: p,\n        ex: ex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this);\n  };\n\n  const handleMove = () => {\n    AsyncForEach(sBranches, () => {\n      sBranches.forEach(branch => {\n        const url = apiBase + '/branch';\n        const data = {\n          id: branch._id,\n          origin: moveTarget\n        };\n        tokenPatch(url, data, p.token).then(d => {\n          if (d && d._d) console.log(d._id);\n        });\n      });\n    });\n    freshBranches();\n    setSBranches([]);\n  };\n\n  useEffect(() => {\n    if (!data._id) return;\n    tokenGet(p.apiBase + '/branch/pBranch?id=' + data._id).then(d => {\n      if (d.reason) return;\n      setParent(d.reverse());\n    });\n  }, [data]);\n  ex = { ...ex,\n    data,\n    setIsAction,\n    sBranches,\n    setSBranches,\n    freshBranches,\n    branchTitle\n  };\n\n  const getListWrapperWidth = () => {\n    if (p.navSts.isVisibleNav) {\n      return 43;\n    } else {\n      return 90;\n    }\n  };\n\n  const getMoveSection = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('wrapper'),\n      children: p.navSts.isVisibleNav && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('move'),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('input'),\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: getCls('VaqSI'),\n            value: moveTarget,\n            onChange: e => {\n              setMoveTarget(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('move1'),\n          onClick: handleMove,\n          children: \"Move\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: p.getCls('branch-view-wrapper'),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('Rta6QukC'),\n        children: [/*#__PURE__*/_jsxDEV(RightPanel, {\n          p: p\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }, this), getMoveSection()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }, this), !isAction &&\n      /*#__PURE__*/\n\n      /* origin name and list actions */\n      _jsxDEV(\"div\", {\n        className: p.getCls('branch-view-container'),\n        style: {\n          width: getListWrapperWidth() + 'vw'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('root-section'),\n          children: [bOrigin(), listActions()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 29\n        }, this), getList()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 25\n      }, this), isAction && isFlashCard && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('flash-card-wrapper'),\n        children: /*#__PURE__*/_jsxDEV(FlashCard, {\n          p: p,\n          ex: ex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }, this), isAction && isQuizlet && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('flash-card-wrapper'),\n        children: /*#__PURE__*/_jsxDEV(Quizlet, {\n          p: p,\n          ex: ex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BranchView, \"vfSkNuQdNdauwAyIwwkhVhzXgbs=\");\n\n_c = BranchView;\n\nfunction getRandId() {\n  return Math.random() * (200000 - 0) + 0;\n}\n\nexport default BranchView;\n\nvar _c;\n\n$RefreshReg$(_c, \"BranchView\");","map":{"version":3,"sources":["F:/React/tree-mysql/src/Components/branches/BranchView.js"],"names":["React","useEffect","useState","List","Link","RightPanel","FlashCard","Quizlet","tokenPatch","AsyncForEach","tokenGet","date1","axiosTokenHeader","axios","BranchView","props","isDark","data","apiBase","setUpToDate","fontSize","p","branch","ex","getCls","freshBranches","sBranches","setSBranches","moveTarget","setMoveTarget","resMsg","setResMsg","isFlashCard","setIsFlashCard","isQuizlet","setIsQuizlet","isAction","setIsAction","parents","setParent","origin","setOrigin","branchTitle","name","split","createDate","created_at","date","Date","typed","flashCardReq","quizletReq","bOrigin","id","listActions","navSts","isVisibleNav","getCommand","command","getList","length","map","parent","_id","textAlign","listAlign","e","getRandId","children","handleMove","forEach","url","token","then","d","_d","console","log","reason","reverse","getListWrapperWidth","getMoveSection","target","value","width","Math","random"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport List from './list/List'\nimport { Link } from 'react-router-dom'\nimport RightPanel from '../rightSide/RightPanel'\nimport FlashCard from './FlashCard'\nimport Quizlet from './Quizlet'\nimport { tokenPatch, AsyncForEach, tokenGet, date1, axiosTokenHeader } from '../../utils/functions'\nimport axios from 'axios'\n\nfunction BranchView(props) {\n    const { isDark, data, apiBase, setUpToDate, fontSize, p, branch } = props\n    let { ex } = props\n    const { getCls } = p\n    const { freshBranches } = ex\n    const [sBranches, setSBranches] = useState([])\n    const [moveTarget, setMoveTarget] = useState('')\n    const [resMsg, setResMsg] = useState(null)\n    const [isFlashCard, setIsFlashCard] = useState(false)\n    const [isQuizlet, setIsQuizlet] = useState(false)\n    const [isAction, setIsAction] = useState(false)\n    const [parents, setParent] = useState([])\n    const [origin, setOrigin] = useState(false)\n    let branchTitle = []\n    if (branch && branch.name)\n        branchTitle = branch.name.split('\\n')\n\n\n    const createDate = () => {\n        if (!branch || !branch.created_at) return ''\n        const date = new Date(branch.created_at)\n        const typed = date1(date)\n        return typed\n\n    }\n\n    const flashCardReq = () => {\n        setIsAction(true)\n        setIsFlashCard(true)\n        setIsQuizlet(false)\n\n    }\n\n    const quizletReq = () => {\n        setIsAction(true)\n        setIsQuizlet(true)\n        setIsFlashCard(false)\n    }\n\n    const bOrigin = () => {\n        return (\n            <div className={getCls('BNBKece')}>\n                {origin &&\n                    <Link to={\"/\" + origin.id} className={`link ${isDark ? \"dark-link\" : \"light-link\"}`}>{origin.name}</Link>\n                }\n\n                {!origin &&\n                    <Link to={\"/\"} className={`link ${isDark ? \"dark-link\" : \"light-link\"}`}><i className=\"fas fa-home\"></i></Link>\n\n                }\n            </div>\n        )\n    }\n\n    const listActions = () => {\n        return (\n            <div className={getCls('container')}>\n                {p.navSts.isVisibleNav &&\n                    <div className={getCls('branch-list-header-actions')}>\n                        <div className={getCls('list-action')} onClick={() => { flashCardReq() }}>flash card</div>\n                        <div className={getCls('list-action')} onClick={() => { quizletReq() }}>Quizlet</div>\n                    </div>\n                }\n            </div>\n        )\n    }\n\n    const getCommand = () => {\n        if (data.command) return '#' + data.command\n        return ''\n    }\n\n    const getList = () => {\n        return (\n            <div className={getCls('gDhZZyqJTsAcIbvq')}>\n                {/* time */}\n                <div className={getCls('time')}>\n                    {createDate()}\n                </div>\n\n                {/* branch roots branches */}\n                <div className={getCls('parentW1')}>\n                    <div className={getCls('U7q')}>\n                        {parents.length > 0 && parents.map(parent => (\n                            <Link to={'/' + parent._id} key={parent._id} className={getCls('link') + ' VH9sY'}>\n                                <span className='mDCcQ'>/</span>\n                                <span className='JpN'>{parent.name}</span>\n                            </Link>\n                        ))}\n                    </div>\n                </div>\n\n\n                {/* branch title */}\n                <div className={getCls('branch-list-header')} style={{ textAlign: `${p.listAlign}` }}>\n                    <h1> {branchTitle.map(e => (\n                        <div key={getRandId()} className={getCls('branch-list-title')}>{e}</div>\n                    ))} </h1>\n                    {/* command */}\n                    <div className={getCls('YmOebB8')}>\n                        {getCommand()}\n                    </div>\n                </div>\n\n\n                {\n                    data.children &&\n                    <List branches={data.children} isDark={isDark} location={data.id} apiBase={apiBase} setUpToDate={setUpToDate} fontSize={fontSize} p={p} ex={ex} />\n                }\n\n                {\n                    !data.children &&\n                    <List branches={data} isDark={isDark} location={data.id} apiBase={apiBase} setUpToDate={setUpToDate} fontSize={fontSize} p={p} ex={ex} />\n                }\n            </div>\n        )\n    }\n\n    const handleMove = () => {\n        AsyncForEach(sBranches, () => {\n            sBranches.forEach((branch) => {\n                const url = apiBase + '/branch'\n                const data = {\n                    id: branch._id,\n                    origin: moveTarget\n                }\n                tokenPatch(url, data, p.token).then((d) => {\n                    if (d && d._d) console.log(d._id);\n                })\n            });\n        })\n        freshBranches()\n        setSBranches([])\n\n\n    }\n\n    useEffect(() => {\n        if (!data._id) return\n        tokenGet(p.apiBase + '/branch/pBranch?id=' + data._id)\n            .then((d) => {\n                if (d.reason) return\n                setParent(d.reverse())\n            })\n    }, [data])\n\n    ex = {\n        ...ex,\n        data, setIsAction, sBranches, setSBranches, freshBranches, branchTitle\n    }\n\n\n    const getListWrapperWidth = () => {\n        if (p.navSts.isVisibleNav) {\n            return 43\n        } else {\n            return 90\n        }\n    }\n\n    const getMoveSection = () => {\n        return (\n            <div className={getCls('wrapper')}>\n                {p.navSts.isVisibleNav &&\n                    <div className={getCls('move')}>\n                        <div className={getCls('input')}>\n                            <input type=\"text\" className={getCls('VaqSI')} value={moveTarget} onChange={(e) => { setMoveTarget(e.target.value) }} />\n                        </div>\n                        <div className={getCls('move1')} onClick={handleMove}>\n                            Move\n                        </div>\n                    </div>\n                }\n            </div>\n\n        )\n    }\n\n    return (\n        <div>\n            {data &&\n                <div className={p.getCls('branch-view-wrapper')}>\n                    <div className={getCls('Rta6QukC')}>\n                        {/* right panel */}\n                        <RightPanel p={p} />\n                        {/* move */}\n                        {getMoveSection()}\n                    </div>\n\n                    {!isAction &&\n                        /* origin name and list actions */\n                        < div className={p.getCls('branch-view-container')} style={{ width: getListWrapperWidth() + 'vw' }}>\n                            <div className={getCls('root-section')}>\n                                {bOrigin()}\n                                {listActions()}\n                            </div>\n\n\n                            {getList()}\n\n\n                        </div>\n                    }\n\n\n\n\n                    {isAction && isFlashCard &&\n                        <div className={getCls('flash-card-wrapper')}>\n                            <FlashCard p={p} ex={ex} />\n                        </div>\n                    }\n                    {isAction && isQuizlet &&\n                        <div className={getCls('flash-card-wrapper')}>\n                            <Quizlet p={p} ex={ex} />\n                        </div>\n                    }\n                </div>\n            }\n        </div >\n    )\n}\n\nfunction getRandId() {\n    return Math.random() * (200000 - 0) + 0\n}\n\nexport default BranchView\n"]},"metadata":{},"sourceType":"module"}