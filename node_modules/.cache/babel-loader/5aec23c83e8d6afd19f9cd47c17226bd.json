{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\React\\\\tree-mysql\\\\src\\\\pages\\\\Branch.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport BranchView from '../Components/branches/BranchView';\nimport { axiosTokenHeader, tokenGet } from '../utils/functions';\nimport Helmet from 'react-helmet';\nimport axios from 'axios';\n\nfunction Branch(props) {\n  _s();\n\n  const [data, setData] = useState(null);\n  const [isPending, setIsPending] = useState(true);\n  const [error, setError] = useState(null);\n  const [branch, setBranch] = useState(false);\n  const {\n    isDark,\n    apiBase,\n    fontSize,\n    apiBase2,\n    token\n  } = props.p;\n  const {\n    id\n  } = useParams();\n  let url;\n\n  if (id) {\n    url = apiBase2 + '/branches/nested?id=' + id;\n  } else {\n    url = apiBase2 + '/branches/root';\n  }\n\n  useEffect(() => {\n    if (!id) return;\n    const url = apiBase2 + '/branches?id=' + id;\n    axios.get(url, axiosTokenHeader(token)).then(e => console.log(e.data)).catch(r => console.log(r));\n  }, []);\n\n  const freshBranches = () => {\n    tokenGet(url, {\n      Authorization: token\n    }).then(data => {\n      setIsPending(false);\n      setData(data);\n      setError(null);\n    }).catch(err => {\n      if (err.name === 'AbortError') {\n        console.log('fetch aborted');\n      } else {\n        // auto catches network / connection error\n        setIsPending(false);\n        setError(err.message);\n      }\n    });\n  };\n\n  useEffect(() => {\n    freshBranches();\n  }, [url]);\n  const ex = {\n    freshBranches\n  };\n\n  const getTitle = () => {\n    if (branch && branch.name) return branch.name;else return 'Notes';\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [data && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'wrapper',\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: /*#__PURE__*/_jsxDEV(\"title\", {\n          children: getTitle()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(BranchView, {\n        isDark: isDark,\n        data: data,\n        isPending: isPending,\n        apiBase: apiBase,\n        setUpToDate: setData,\n        fontSize: fontSize,\n        p: props.p,\n        ex: ex,\n        branch: branch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this), isPending && /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"fas fa-spinner spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 27\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", error, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Branch, \"he1iYSov77D1WPpqkfD9EAfiSa0=\", false, function () {\n  return [useParams];\n});\n\n_c = Branch;\nexport default Branch;\n\nvar _c;\n\n$RefreshReg$(_c, \"Branch\");","map":{"version":3,"sources":["F:/React/tree-mysql/src/pages/Branch.js"],"names":["React","useState","useEffect","useParams","BranchView","axiosTokenHeader","tokenGet","Helmet","axios","Branch","props","data","setData","isPending","setIsPending","error","setError","branch","setBranch","isDark","apiBase","fontSize","apiBase2","token","p","id","url","get","then","e","console","log","catch","r","freshBranches","Authorization","err","name","message","ex","getTitle"],"mappings":"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","sourcesContent":["import { React, useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport BranchView from '../Components/branches/BranchView'\nimport { axiosTokenHeader, tokenGet } from '../utils/functions'\nimport Helmet from 'react-helmet'\nimport axios from 'axios'\n\nfunction Branch(props) {\n    const [data, setData] = useState(null);\n    const [isPending, setIsPending] = useState(true);\n    const [error, setError] = useState(null);\n    const [branch, setBranch] = useState(false)\n    const { isDark, apiBase, fontSize, apiBase2, token } = props.p\n    const { id } = useParams()\n    let url;\n    if (id) {\n        url = apiBase2 + '/branches/nested?id=' + id\n    } else {\n        url = apiBase2 + '/branches/root'\n    }\n\n    useEffect(() => {\n        if(!id) return \n        const url = apiBase2 + '/branches?id=' + id\n        axios.get(url, axiosTokenHeader(token)).then(e => console.log(e.data)).catch(r => console.log(r))\n    }, [])\n\n    const freshBranches = () => {\n        tokenGet(url, { Authorization: token })\n            .then(data => {\n                setIsPending(false);\n                setData(data);\n                setError(null);\n            })\n            .catch(err => {\n                if (err.name === 'AbortError') {\n                    console.log('fetch aborted')\n                } else {\n                    // auto catches network / connection error\n                    setIsPending(false);\n                    setError(err.message);\n                }\n            })\n    }\n\n    useEffect(() => {\n\n        freshBranches()\n\n    }, [url])\n\n    const ex = {\n        freshBranches\n    }\n\n    const getTitle = () => {\n        if (branch && branch.name) return branch.name\n        else return 'Notes'\n    }\n\n    return (\n        <div>\n            {data &&\n                <div className={'wrapper'}>\n                    <Helmet>\n                        <title>{getTitle()}</title>\n                    </Helmet>\n                    <BranchView isDark={isDark} data={data} isPending={isPending} apiBase={apiBase} setUpToDate={setData} fontSize={fontSize} p={props.p} ex={ex} branch={branch} />\n                </div>\n\n            }\n            {isPending && <i className=\"fas fa-spinner spinner\"></i>}\n            {error && <div> {error} </div>}\n        </div>\n    )\n}\n\nexport default Branch\n"]},"metadata":{},"sourceType":"module"}