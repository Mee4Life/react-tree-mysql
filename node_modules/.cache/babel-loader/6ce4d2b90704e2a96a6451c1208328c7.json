{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\React\\\\tree-mysql\\\\src\\\\Components\\\\branches\\\\single\\\\Single.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState } from 'react';\nimport ReactEmbedGist from 'react-embed-gist';\nimport ReactAudioPlayer from 'react-audio-player';\nimport { Player } from 'video-react';\nimport AudioPlayer from 'react-h5-audio-player';\nimport 'react-h5-audio-player/lib/styles.css';\nimport Input1 from '../../Inputs/input1';\nimport { Link } from 'react-router-dom';\nimport './single.css';\nimport { tokenGet, tokenPatch, tokenPost } from '../../../utils/functions';\n\nfunction Single(props) {\n  _s();\n\n  const {\n    branch,\n    isDark,\n    apiBase,\n    location,\n    setData,\n    setEdit,\n    setBranch,\n    selectedBranches,\n    setSelected,\n    p,\n    counted,\n    ex\n  } = props;\n  const originTitle = ex.branchTitle;\n\n  const getCls = base => {\n    return p.getCls('xEzOkLwAp64vOO2CGf-' + base);\n  };\n\n  const [isDeleting, setDeleting] = useState(false);\n  const [isMoving, setMoving] = useState(false);\n  const [selectedBranch, setIsSelected] = useState(false);\n  const [isExMenu, setIsExMenu] = useState(false);\n  const [isPinned, setIsPinned] = useState(branch.pinned);\n  const [isPositive, setIsPositive] = useState(branch.positive);\n  const [nBranchName, setNBranchName] = useState(branch.name);\n  const [oldBName, setOldBName] = useState(branch.name);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const [info, setInfo] = useState(false); // selected groups\n\n  const [sGroups, setSGroups] = useState([]); // new group name input\n\n  const [nGroupName, setNGroupName] = useState(''); // result groups \n\n  const [rGroups, setRGroups] = useState([]); // isLoading \n\n  const [selGroupLoading, setSelGroupLoading] = useState(true); // selected People\n\n  const [sPeople, setSPeople] = useState([]); // new person name input\n\n  const [nPersonName, setNPersonName] = useState(''); // result people \n\n  const [rPeople, setRPeople] = useState([]); // isLoading \n\n  const [selPeopleLoading, setSelPeopleLoading] = useState(true); // branch has children : \n\n  let hasChild = false;\n  if (branch && branch.children && branch.children.length > 0) hasChild = true;\n  useEffect(() => {\n    // set selected groups\n    tokenPost(p.apiBase + '/group/many', {\n      ids: branch.groups\n    }, p.token).then(d => {\n      setSGroups(d);\n      setSelGroupLoading(false);\n    });\n  }, []);\n  useEffect(() => {\n    tokenPost(p.apiBase + '/person/many', {\n      ids: branch.persons\n    }, p.token).then(d => {\n      setSPeople(d);\n      setSelPeopleLoading(false);\n    });\n  }, []);\n\n  const branchesListToggleBranchMenu = () => {\n    p.setBranchesListBranchMenu(!p.branchesListIsBranchMenu);\n  };\n\n  const branchDir = () => {\n    if (branch.lang == 'ar') return 'rtl';else return 'ltr';\n  };\n\n  const handleBranchEdit = () => {\n    setEdit(true);\n    setBranch(branch);\n  };\n\n  const handleMoveBranch = dir => {\n    setMoving(true);\n    const url = apiBase + '/branch/move?id=' + branch._id + '&dir=' + dir;\n    console.log(url);\n    tokenGet(url, {\n      token: p.token\n    }).then(d => {\n      console.log(d); // fetch new branches . \n\n      let url;\n\n      if (location.length > 0) {\n        url = url = apiBase + '/branch?id=' + location;\n        tokenGet(url, {\n          token: p.token\n        }).then(d => {\n          setData(d);\n          setMoving(false);\n        });\n      } else {\n        url = url = apiBase + '/branch';\n        tokenGet(url, {\n          token: p.token\n        }).then(e => {\n          // extract root branches : \n          const rootBranches = e.filter(b => {\n            return b.origin == null;\n          });\n          setData(rootBranches);\n          setMoving(false);\n        });\n      }\n    });\n  };\n\n  const handleBranchRemove = () => {\n    setDeleting(true);\n    const url = apiBase + '/branch?id=' + branch._id + '&complete=true';\n    deleteFunc(url).then(e => {\n      return e.json;\n    }).then(e => {\n      // fetch new branches . \n      let url;\n      if (location && location.length) url = apiBase + '/branch?id=' + location;else url = apiBase + '/branch';\n      fetch(url).then(d => {\n        return d.json();\n      }).then(e => {\n        if (location && location.length > 0) setData(e);else {\n          // extract root branches : \n          // extract root branches : \n          const rootBranches = e.filter(b => {\n            return b.origin == null;\n          });\n          setData(rootBranches);\n        }\n      });\n    });\n  };\n\n  const handleSelectedBranch = () => {\n    // update selected branches status\n    // check if the branch already selected to remove . \n    if (selectedBranch) {\n      const se = selectedBranches.filter(b => {\n        return b !== branch;\n      });\n      setSelected(se);\n      setIsSelected(false);\n    } else {\n      // new branch to array\n      const temp = selectedBranches;\n      temp.push(branch);\n      setSelected(temp);\n      setIsSelected(true);\n    }\n  };\n\n  const getCounter = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('cW5I2ewdL'),\n      style: {\n        textAlign: `${p.listAlign}`\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('wqN7qIpfw'),\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: counted\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this);\n  };\n\n  const getTextContent = () => {\n    let inner = {\n      __html: nBranchName.replace(\"<br>\", \"\").replace(/\\n\\n/g, \"<br>\").replace(/\\n/g, \"<br>\")\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('wrapper'),\n      style: {\n        textAlign: `${p.listAlign}`\n      },\n      children: [p.numberedList && getCounter(), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\" + branch._id,\n        dangerouslySetInnerHTML: inner,\n        className: `link branch-name ${isDark ? \"dark-link\" : \"light-link\"}`,\n        style: {\n          direction: `${branchDir()}`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this), hasChild && /*#__PURE__*/_jsxDEV(\"i\", {\n        onClick: branchesListToggleBranchMenu,\n        className: \"fas fa-ellipsis-h\",\n        style: {\n          marginBottom: 4,\n          fontSize: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this);\n  };\n\n  const getYoutubeSource = () => {\n    return \"https://www.youtube.com/embed/\" + branch.name;\n  };\n\n  function getWindowDimensions() {\n    const {\n      innerWidth: width,\n      innerHeight: height\n    } = window;\n    return {\n      width,\n      height\n    };\n  }\n\n  const getYoutubeContent = () => {\n    // check client width : \n    if (getWindowDimensions().width > 600) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"youtube-container\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          width: \"560\",\n          height: \"315\",\n          src: getYoutubeSource(),\n          frameborder: \"0\",\n          allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n          allowfullscreen: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"youtube-container\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          width: \"300\",\n          height: \"250\",\n          src: getYoutubeSource(),\n          frameborder: \"0\",\n          allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n          allowfullscreen: \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  const getGistContent = () => {\n    return /*#__PURE__*/_jsxDEV(ReactEmbedGist, {\n      gist: branch.name,\n      titleClass: \"gist__title\",\n      contentClass: \"gist__content\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 16\n    }, this);\n  };\n\n  const getOriginName = () => {\n    return originTitle[0];\n  };\n\n  const getSoundName = () => {\n    console.log(originTitle);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('zhwiWnUPj'),\n      children: branch.extra && branch.extra.songName && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('songName1'),\n        children: [branch.extra.songName, \" - \", getOriginName()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }, this);\n  };\n\n  const getEWidth = () => {\n    return 80;\n  };\n\n  const getSoundContent = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('q2Qj'),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('dtl'),\n        children: getSoundName()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(AudioPlayer, {\n        src: branch.name // other props here\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }, this);\n  };\n\n  const getImageContent = () => {\n    // check client width : \n    if (getWindowDimensions().width > 600) {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          maxWidth: 800\n        },\n        src: branch.name,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          width: 300\n        },\n        src: branch.name,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 20\n      }, this);\n    }\n  };\n\n  const getVideoContent = () => {\n    const e = /*#__PURE__*/_jsxDEV(Player, {\n      className: \"video-player\",\n      children: /*#__PURE__*/_jsxDEV(\"source\", {\n        src: branch.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 19\n    }, this);\n\n    return e;\n  };\n\n  const getLinkContent = () => {\n    if (branch.extra && branch.extra.name) {\n      const e = /*#__PURE__*/_jsxDEV(\"a\", {\n        href: branch.name,\n        className: isDark ? 'dark-link' : 'light-link',\n        children: branch.extra.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 23\n      }, this);\n\n      return e;\n    }\n\n    const e = /*#__PURE__*/_jsxDEV(\"a\", {\n      href: branch.name,\n      className: isDark ? 'dark-link' : 'light-link',\n      children: branch.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 19\n    }, this);\n\n    return e;\n  };\n\n  const getBranch = () => {\n    let content;\n\n    if (branch.type === 'text') {\n      content = getTextContent();\n    }\n\n    if (branch.type === 'image') {\n      content = getImageContent();\n    }\n\n    if (branch.type === 'youtube') {\n      content = getYoutubeContent();\n    }\n\n    if (branch.type === 'gist') {\n      content = getGistContent();\n    }\n\n    if (branch.type === 'sound') {\n      content = getSoundContent();\n    }\n\n    if (branch.type === 'video') {\n      content = getVideoContent();\n    }\n\n    if (branch.type === 'link') {\n      content = getLinkContent();\n    }\n\n    return content;\n  };\n\n  const branchExMenu = () => {\n    setIsExMenu(!isExMenu);\n  };\n\n  const togglePinAPI = () => {\n    tokenGet(p.apiBase + '/branch/tPinned?id=' + branch._id, {\n      token: p.token\n    }).then(d => {\n      setIsPinned(d.pinned);\n      sendSuccess('pinned : ' + d.pinned);\n    });\n  };\n\n  const togglePosAPI = () => {\n    tokenGet(p.apiBase + '/branch/positive?id=' + branch._id, {\n      token: p.token\n    }).then(d => {\n      setIsPositive(d.positive);\n      sendSuccess('positive : ' + d.positive);\n    });\n  };\n\n  const getPinned = () => {\n    if (!isPinned) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('pinned'),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"4Wt\",\n          children: \"pinned\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pinToggler\",\n          onClick: () => {\n            togglePinAPI();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-toggle-off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 21\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('pinned'),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"pinned\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pinToggler\",\n          onClick: () => {\n            togglePinAPI();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-toggle-on\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 21\n      }, this);\n    }\n  };\n\n  const getPositive = () => {\n    if (!isPositive) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('positive'),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"4Wt\",\n          children: \"positive\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"posToggler\",\n          onClick: () => {\n            togglePosAPI();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-toggle-off\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 21\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('positive'),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"positive\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"posToggler\",\n          onClick: () => {\n            togglePosAPI();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-toggle-on\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }, this);\n    }\n  };\n  /* \n   state  . \n  groups\n  groupName\n  selectedGroups\n   - get all groups from the db \n  - create input to handle user input\n  - filter groups by input\n  - selection section\n      - dis select on click o\n  - results section\n    - get branch groups to selected groups\n   \n  \n  */\n\n\n  const getRootActions = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"branch-actions\",\n      children: [!isMoving && /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-arrow-up branch-action branch-arrow-up\",\n        onClick: () => {\n          handleMoveBranch(1);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 31\n      }, this), !isMoving && /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-arrow-down branch-action branch-arrow-down\",\n        onClick: () => {\n          handleMoveBranch(0);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 31\n      }, this), !isDeleting && /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-eraser branch-action branch-remove\",\n        onClick: () => {\n          handleBranchRemove();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: '/nested/' + branch._id,\n        className: p.getCls('link'),\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-expand-alt branch-action\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 81\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 17\n      }, this), !isExMenu && /*#__PURE__*/_jsxDEV(\"i\", {\n        onClick: branchExMenu,\n        className: \"fas fa-caret-square-down branch-action\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 31\n      }, this), selectedBranch && /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"far fa-check-square checkbox\",\n        onClick: () => {\n          handleSelectedBranch();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 36\n      }, this), !selectedBranch && /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"far fa-square checkbox\",\n        onClick: () => {\n          handleSelectedBranch();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 37\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this);\n  };\n\n  function sendSuccess(msg) {\n    setInfo(true);\n    setSuccess(msg);\n    setTimeout(() => {\n      setInfo(false);\n      setSuccess(false);\n    }, 3000);\n  }\n\n  const saveNewName = () => {\n    tokenPatch(p.apiBase + '/branch', {\n      id: branch._id,\n      name: nBranchName\n    }, p.token).then(d => {\n      branch.name = d.name;\n      sendSuccess('Name Changed');\n    });\n  };\n\n  function toggleGroup(group) {\n    // remove group from the branch \n    tokenPost(p.apiBase + '/branch/toggleGroup', {\n      id: branch._id,\n      group: group._id\n    }, p.token).then(d => {\n      setSGroups(d.groups);\n    });\n  }\n\n  function togglePerson(person) {\n    // remove group from the branch \n    tokenPost(p.apiBase + '/branch/togglePerson', {\n      id: branch._id,\n      person: person._id\n    }, p.token).then(d => {\n      console.log(d);\n      setSPeople(d.persons);\n    });\n  }\n\n  function getSelectedGroups() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('selectedGroups'),\n      children: !selGroupLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: sGroups.map(group => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('group0'),\n          onClick: () => {\n            toggleGroup(group);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: getCls('v04TWL'),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-check\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 64\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"grGP\",\n            children: group.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 29\n          }, this)]\n        }, group._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 13\n    }, this);\n  }\n\n  function getSelectedPeople() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('selectedGroups'),\n      children: !selPeopleLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: sPeople.map(group => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('group0'),\n          onClick: () => {\n            togglePerson(group);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: getCls('v04TWL'),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-check\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 64\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"grGP\",\n            children: group.fname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 29\n          }, this)]\n        }, group._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 39\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 13\n    }, this);\n  }\n\n  function groupEditChange(e) {\n    const val = e.target.value;\n    setNGroupName(val); // get all groups from the db .\n\n    tokenGet(p.apiBase + '/group/search?q=' + val, {\n      token: p.token\n    }).then(d => {\n      setRGroups(d);\n      console.log(d);\n    });\n  }\n\n  function personEditChange(e) {\n    const val = e.target.value;\n    setNPersonName(val); // get all groups from the db .\n\n    tokenGet(p.apiBase + '/person/search?q=' + val, {\n      token: p.token\n    }).then(d => {\n      setRPeople(d);\n    });\n  }\n\n  function handleNewGroup(group) {\n    // toggle group to branch \n    toggleGroup(group);\n  }\n\n  function handleNewPerson(person) {\n    // toggle group to branch\n    togglePerson(person);\n  }\n\n  function handleNewInputGroup() {\n    tokenPost(p.apiBase + '/group', {\n      name: nGroupName\n    }, p.token).then(d => {\n      const temp = sGroups;\n      temp.push(d);\n      setSGroups(temp);\n    });\n  }\n\n  function handleNewInputPerson() {\n    tokenPost(p.apiBase + '/person', {\n      fname: nPersonName\n    }, p.token).then(d => {\n      const temp = sPeople;\n      temp.push(d);\n      setSPeople(temp);\n    });\n  }\n\n  function getInputGroups() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('kdW3'),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('form'),\n        children: [/*#__PURE__*/_jsxDEV(Input1, {\n          value: nGroupName,\n          placeholder: \"group name\",\n          type: \"text\",\n          onChange: e => {\n            groupEditChange(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: getCls('lRb4'),\n          onClick: handleNewInputGroup,\n          children: \"New\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('result'),\n        children: rGroups && rGroups.length > 0 && rGroups.map(g => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"GV\",\n          onClick: () => {\n            handleNewGroup(g);\n          },\n          children: g.name\n        }, g._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 13\n    }, this);\n  }\n\n  function getInputPeople() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('kdW3'),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('form'),\n        children: [/*#__PURE__*/_jsxDEV(Input1, {\n          value: nPersonName,\n          placeholder: \"person name\",\n          type: \"text\",\n          onChange: e => {\n            personEditChange(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: getCls('lRb4'),\n          onClick: () => {\n            handleNewInputPerson();\n          },\n          children: \"New\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('result'),\n        children: rPeople.map(g => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"GV\",\n          onClick: () => {\n            handleNewPerson(g);\n          },\n          children: g.fname\n        }, g._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 13\n    }, this);\n  }\n\n  function getGroupsSection() {\n    // selected groups section\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('OcnAq'),\n      children: [getSelectedGroups(), getInputGroups()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 13\n    }, this);\n  }\n\n  function getPeopleSection() {\n    // selected groups section\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('OcnAq'),\n      children: [getSelectedPeople(), getInputPeople()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 13\n    }, this);\n  }\n\n  const setDir = () => {\n    if (branch.lang === 'ar') return 'rtl';else return 'ltr';\n  };\n\n  const setTextAlign = () => {\n    if (branch.lang === 'ar') return 'right';else return 'left';\n  };\n\n  const handleNameChange = e => {\n    setNBranchName(e.target.innerText);\n  };\n\n  const getExMenu = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('wrapper1'),\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        onClick: branchExMenu,\n        className: \"far fa-times-circle branch-action\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 17\n      }, this), info && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('info-section'),\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('error-section'),\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 31\n        }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('success-section'),\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('input') + ' exMenuItem newNameEdit',\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: getCls('edit-branch-wrapper'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: getCls('edit-container'),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              contentEditable: \"true\",\n              id: \"branchName\",\n              className: \"input-name\",\n              onInput: e => handleNameChange(e),\n              style: {\n                direction: `${setDir()}`,\n                textAlign: `${setTextAlign()}`\n              },\n              children: oldBName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: getCls('submit-edit'),\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: getCls('submitBranchName'),\n              onClick: () => {\n                saveNewName();\n              },\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('pinned') + ' exMenuItem',\n        children: getPinned()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('positive') + ' exMenuItem',\n        children: getPositive()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('groups'),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Groups\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 27\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 21\n        }, this), getGroupsSection()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('people'),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"People\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 27\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 21\n        }, this), getPeopleSection()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 611,\n      columnNumber: 13\n    }, this);\n  };\n\n  const gBranchActions = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: getCls('actions-container'),\n      children: p.branchesListIsBranchMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: getCls('wrapper0'),\n        children: [!isExMenu && getRootActions(), isExMenu && getExMenu()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: getCls('branch-container'),\n    style: {\n      marginBottom: p.branchMargin,\n      backgroundColor: p.branchBKColor\n    },\n    children: [getBranch(), gBranchActions()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 679,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Single, \"0xNnvU5E63VR2nTARWjDGrefQuA=\");\n\n_c = Single;\n\nasync function deleteFunc(url = '') {\n  // Default options are marked with *\n  const response = await fetch(url, {\n    method: 'DELETE',\n    // *GET, POST, PUT, DELETE, etc.\n    mode: 'cors',\n    // no-cors, *cors, same-origin\n    cache: 'no-cache',\n    // *default, no-cache, reload, force-cache, only-if-cached\n    credentials: 'same-origin',\n    // include, *same-origin, omit\n    redirect: 'follow',\n    // manual, *follow, error\n    referrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\n  });\n  return response.json(); // parses JSON response into native JavaScript objects\n}\n\nexport default Single;\n\nvar _c;\n\n$RefreshReg$(_c, \"Single\");","map":{"version":3,"sources":["F:/React/tree-mysql/src/Components/branches/single/Single.js"],"names":["React","useEffect","useState","ReactEmbedGist","ReactAudioPlayer","Player","AudioPlayer","Input1","Link","tokenGet","tokenPatch","tokenPost","Single","props","branch","isDark","apiBase","location","setData","setEdit","setBranch","selectedBranches","setSelected","p","counted","ex","originTitle","branchTitle","getCls","base","isDeleting","setDeleting","isMoving","setMoving","selectedBranch","setIsSelected","isExMenu","setIsExMenu","isPinned","setIsPinned","pinned","isPositive","setIsPositive","positive","nBranchName","setNBranchName","name","oldBName","setOldBName","success","setSuccess","error","setError","info","setInfo","sGroups","setSGroups","nGroupName","setNGroupName","rGroups","setRGroups","selGroupLoading","setSelGroupLoading","sPeople","setSPeople","nPersonName","setNPersonName","rPeople","setRPeople","selPeopleLoading","setSelPeopleLoading","hasChild","children","length","ids","groups","token","then","d","persons","branchesListToggleBranchMenu","setBranchesListBranchMenu","branchesListIsBranchMenu","branchDir","lang","handleBranchEdit","handleMoveBranch","dir","url","_id","console","log","e","rootBranches","filter","b","origin","handleBranchRemove","deleteFunc","json","fetch","handleSelectedBranch","se","temp","push","getCounter","textAlign","listAlign","getTextContent","inner","__html","replace","numberedList","direction","marginBottom","fontSize","getYoutubeSource","getWindowDimensions","innerWidth","width","innerHeight","height","window","getYoutubeContent","getGistContent","getOriginName","getSoundName","extra","songName","getEWidth","getSoundContent","getImageContent","maxWidth","getVideoContent","getLinkContent","getBranch","content","type","branchExMenu","togglePinAPI","sendSuccess","togglePosAPI","getPinned","getPositive","getRootActions","msg","setTimeout","saveNewName","id","toggleGroup","group","togglePerson","person","getSelectedGroups","map","getSelectedPeople","fname","groupEditChange","val","target","value","personEditChange","handleNewGroup","handleNewPerson","handleNewInputGroup","handleNewInputPerson","getInputGroups","g","getInputPeople","getGroupsSection","getPeopleSection","setDir","setTextAlign","handleNameChange","innerText","getExMenu","gBranchActions","branchMargin","backgroundColor","branchBKColor","response","method","mode","cache","credentials","redirect","referrerPolicy"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from 'react'\nimport ReactEmbedGist from 'react-embed-gist';\nimport ReactAudioPlayer from 'react-audio-player';\nimport { Player } from 'video-react';\nimport AudioPlayer from 'react-h5-audio-player';\nimport 'react-h5-audio-player/lib/styles.css';\nimport Input1 from '../../Inputs/input1'\n\nimport { Link } from 'react-router-dom'\nimport './single.css'\nimport { tokenGet, tokenPatch, tokenPost } from '../../../utils/functions';\nfunction Single(props) {\n    const { branch, isDark, apiBase, location, setData, setEdit, setBranch, selectedBranches, setSelected, p, counted, ex } = props\n    const originTitle = ex.branchTitle\n    const getCls = (base) => { return p.getCls('xEzOkLwAp64vOO2CGf-' + base) }\n    const [isDeleting, setDeleting] = useState(false)\n    const [isMoving, setMoving] = useState(false)\n    const [selectedBranch, setIsSelected] = useState(false)\n    const [isExMenu, setIsExMenu] = useState(false)\n    const [isPinned, setIsPinned] = useState(branch.pinned)\n    const [isPositive, setIsPositive] = useState(branch.positive)\n    const [nBranchName, setNBranchName] = useState(branch.name)\n    const [oldBName, setOldBName] = useState(branch.name)\n    const [success, setSuccess] = useState(false)\n    const [error, setError] = useState(false)\n    const [info, setInfo] = useState(false)\n    // selected groups\n    const [sGroups, setSGroups] = useState([])\n    // new group name input\n    const [nGroupName, setNGroupName] = useState('')\n    // result groups \n    const [rGroups, setRGroups] = useState([])\n    // isLoading \n    const [selGroupLoading, setSelGroupLoading] = useState(true)\n    // selected People\n    const [sPeople, setSPeople] = useState([])\n    // new person name input\n    const [nPersonName, setNPersonName] = useState('')\n    // result people \n    const [rPeople, setRPeople] = useState([])\n    // isLoading \n    const [selPeopleLoading, setSelPeopleLoading] = useState(true)\n    // branch has children : \n    let hasChild = false\n    if (branch && branch.children && branch.children.length > 0)\n        hasChild = true\n\n    useEffect(() => {\n\n        // set selected groups\n        tokenPost(p.apiBase + '/group/many', { ids: branch.groups }, p.token)\n            .then((d) => {\n                setSGroups(d)\n                setSelGroupLoading(false)\n            })\n\n    }, [])\n\n    useEffect(() => {\n        tokenPost(p.apiBase + '/person/many', { ids: branch.persons }, p.token)\n            .then((d) => {\n                setSPeople(d)\n                setSelPeopleLoading(false)\n            })\n\n    }, [])\n\n\n\n    const branchesListToggleBranchMenu = () => {\n        p.setBranchesListBranchMenu(!p.branchesListIsBranchMenu)\n    }\n\n    const branchDir = () => {\n        if (branch.lang == 'ar') return 'rtl'\n        else return 'ltr'\n    }\n\n    const handleBranchEdit = () => {\n        setEdit(true)\n        setBranch(branch)\n    }\n    const handleMoveBranch = (dir) => {\n        setMoving(true)\n        const url = apiBase + '/branch/move?id=' + branch._id + '&dir=' + dir\n\n        console.log(url)\n\n        tokenGet(url, { token: p.token }).then((d) => {\n            console.log(d)\n            // fetch new branches . \n            let url\n            if (location.length > 0) {\n                url = url = apiBase + '/branch?id=' + location\n                tokenGet(url, { token: p.token }).then((d) => {\n                    setData(d)\n                    setMoving(false)\n                })\n            } else {\n                url = url = apiBase + '/branch'\n                tokenGet(url, { token: p.token }).then((e) => {\n                    // extract root branches : \n                    const rootBranches = e.filter((b) => {\n                        return b.origin == null\n                    })\n                    setData(rootBranches)\n                    setMoving(false)\n                })\n            }\n        })\n    }\n\n    const handleBranchRemove = () => {\n        setDeleting(true)\n        const url = apiBase + '/branch?id=' + branch._id + '&complete=true'\n        deleteFunc(url).then(e => {\n            return e.json\n        }).then(e => {\n            // fetch new branches . \n            let url\n            if (location && location.length)\n                url = apiBase + '/branch?id=' + location\n            else url = apiBase + '/branch'\n            fetch(url).then(d => {\n                return d.json()\n            }).then(e => {\n                if (location && location.length > 0)\n                    setData(e)\n                else {\n                    // extract root branches : \n                    // extract root branches : \n                    const rootBranches = e.filter((b) => {\n                        return b.origin == null\n                    })\n                    setData(rootBranches)\n\n                }\n            })\n        })\n    }\n    const handleSelectedBranch = () => {\n        // update selected branches status\n\n        // check if the branch already selected to remove . \n        if (selectedBranch) {\n            const se = selectedBranches.filter((b) => {\n                return b !== branch\n            })\n            setSelected(se)\n            setIsSelected(false)\n        } else {\n            // new branch to array\n            const temp = selectedBranches\n            temp.push(branch)\n            setSelected(temp)\n            setIsSelected(true)\n        }\n\n    }\n\n    const getCounter = () => {\n        return (\n            <div className={getCls('cW5I2ewdL')} style={{ textAlign: `${p.listAlign}` }}>\n                <div className={getCls('wqN7qIpfw')} >\n                    <span>{counted}</span>\n                </div>\n            </div>\n        )\n    }\n\n\n    const getTextContent = () => {\n        let inner = { __html: nBranchName.replace(\"<br>\", \"\").replace(/\\n\\n/g, \"<br>\").replace(/\\n/g, \"<br>\") }\n        return (\n            <div className={getCls('wrapper')} style={{ textAlign: `${p.listAlign}` }}>\n                {/* counter  */}\n                {p.numberedList && getCounter()}\n                {/* link */}\n                <Link to={\"/\" + branch._id} dangerouslySetInnerHTML={inner} className={`link branch-name ${isDark ? \"dark-link\" : \"light-link\"}`} style={{ direction: `${branchDir()}`, }}>\n                </Link>\n                {/* has child  */}\n                {hasChild &&<i onClick={branchesListToggleBranchMenu}  className=\"fas fa-ellipsis-h\" style={{marginBottom: 4, fontSize: 10}}></i>}\n\n            </div>\n        )\n    }\n\n    const getYoutubeSource = () => {\n        return \"https://www.youtube.com/embed/\" + branch.name\n    }\n\n    function getWindowDimensions() {\n        const { innerWidth: width, innerHeight: height } = window;\n        return {\n            width,\n            height\n        };\n    }\n\n    const getYoutubeContent = () => {\n        // check client width : \n        if (getWindowDimensions().width > 600) {\n            return <div className=\"youtube-container\">\n                <iframe width=\"560\" height=\"315\" src={getYoutubeSource()} frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n            </div>\n        } else {\n            return <div className=\"youtube-container\">\n                <iframe width=\"300\" height=\"250\" src={getYoutubeSource()} frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen='true'></iframe>\n            </div>\n        }\n    }\n\n    const getGistContent = () => {\n        return <ReactEmbedGist gist={branch.name} titleClass=\"gist__title\"\n            contentClass=\"gist__content\" />\n    }\n\n    const getOriginName = () => {\n        return originTitle[0]\n    }\n\n    const getSoundName = () => {\n        console.log(originTitle);\n        return (\n            <div className={getCls('zhwiWnUPj')}>\n                {  branch.extra && branch.extra.songName &&\n                    <div className={getCls('songName1')}>\n                        {branch.extra.songName} - {getOriginName()}\n                    </div>\n                }\n            </div>\n        )\n    }\n\n    const getEWidth = () => {\n        return 80\n    }\n\n\n    const getSoundContent = () => {\n        return (\n            <div className={getCls('q2Qj')}>\n                <div className={getCls('dtl')}>\n                    {getSoundName()}\n                </div>\n                <AudioPlayer\n                    src={branch.name}\n                // other props here\n                />\n            </div>\n        )\n\n    }\n\n    const getImageContent = () => {\n        // check client width : \n        if (getWindowDimensions().width > 600) {\n            return <img style={{ maxWidth: 800 }} src={branch.name} alt=\"\" />\n        } else {\n            return <img style={{ width: 300 }} src={branch.name} alt=\"\" />\n        }\n    }\n\n    const getVideoContent = () => {\n        const e = <Player className=\"video-player\">\n            <source src={branch.name} />\n        </Player>\n        return e\n    }\n    const getLinkContent = () => {\n        if (branch.extra && branch.extra.name) {\n            const e = <a href={branch.name} className={isDark ? 'dark-link' : 'light-link'}>{branch.extra.name}</a>\n            return e\n        }\n\n        const e = <a href={branch.name} className={isDark ? 'dark-link' : 'light-link'}>{branch.name}</a>\n        return e\n    }\n\n    const getBranch = () => {\n        let content;\n        if (branch.type === 'text') {\n            content = getTextContent()\n        }\n        if (branch.type === 'image') {\n            content = getImageContent()\n        }\n\n        if (branch.type === 'youtube') {\n            content = getYoutubeContent()\n        }\n        if (branch.type === 'gist') {\n            content = getGistContent()\n        }\n        if (branch.type === 'sound') {\n            content = getSoundContent()\n        }\n        if (branch.type === 'video') {\n            content = getVideoContent()\n        }\n        if (branch.type === 'link') {\n            content = getLinkContent()\n        }\n\n        return content\n    }\n\n    const branchExMenu = () => {\n        setIsExMenu(!isExMenu)\n    }\n\n    const togglePinAPI = () => {\n        tokenGet(p.apiBase + '/branch/tPinned?id=' + branch._id, { token: p.token }).then((d) => {\n            setIsPinned(d.pinned)\n            sendSuccess('pinned : ' + d.pinned)\n        })\n    }\n    const togglePosAPI = () => {\n        tokenGet(p.apiBase + '/branch/positive?id=' + branch._id, { token: p.token }).then((d) => {\n            setIsPositive(d.positive)\n            sendSuccess('positive : ' + d.positive)\n        })\n    }\n\n    const getPinned = () => {\n        if (!isPinned) {\n            return (<div className={getCls('pinned')}>\n                <span className='4Wt'>pinned</span>\n                <span className=\"pinToggler\" onClick={() => { togglePinAPI() }}>\n                    <i className=\"fas fa-toggle-off\"></i>\n                </span>\n            </div>)\n        } else {\n            return (<div className={getCls('pinned')}>\n                <span>pinned</span>\n                <span className=\"pinToggler\" onClick={() => {\n                    togglePinAPI()\n                }}>\n                    <i className=\"fas fa-toggle-on\"></i>\n                </span>\n            </div>)\n        }\n    }\n\n    const getPositive = () => {\n        if (!isPositive) {\n            return (<div className={getCls('positive')}>\n                <span className='4Wt'>positive</span>\n                <span className=\"posToggler\" onClick={() => { togglePosAPI() }}>\n                    <i className=\"fas fa-toggle-off\"></i>\n                </span>\n            </div>)\n        } else {\n            return (<div className={getCls('positive')}>\n                <span>positive</span>\n                <span className=\"posToggler\" onClick={() => { togglePosAPI() }}>\n                    <i className=\"fas fa-toggle-on\"></i>\n                </span>\n            </div>)\n        }\n    }\n\n\n    /* \n\n    state  . \n    groups\n    groupName\n    selectedGroups\n\n    - get all groups from the db \n    - create input to handle user input\n    - filter groups by input\n    - selection section\n        - dis select on click o\n    - results section\n\n\n    - get branch groups to selected groups\n\n    \n    \n    */\n\n    const getRootActions = () => {\n        return (\n            <div className=\"branch-actions\">\n\n\n                {/* change position */}\n                {!isMoving && <i className=\"fas fa-arrow-up branch-action branch-arrow-up\" onClick={() => {\n                    handleMoveBranch(1)\n                }}></i>}\n                {!isMoving && <i className=\"fas fa-arrow-down branch-action branch-arrow-down\" onClick={() => {\n                    handleMoveBranch(0)\n                }}></i>}\n\n                {/* delete */}\n                {!isDeleting && <i className=\"fas fa-eraser branch-action branch-remove\" onClick={() => {\n                    handleBranchRemove()\n                }}></i>}\n\n                {/* show nested  */}\n                <Link to={'/nested/' + branch._id} className={p.getCls('link')}><i className=\"fas fa-expand-alt branch-action\" ></i></Link>\n\n                {/* expanded Menu */}\n                {!isExMenu && <i onClick={branchExMenu} className=\"fas fa-caret-square-down branch-action\"></i>}\n\n                {/* select */}\n                {selectedBranch && <i className=\"far fa-check-square checkbox\" onClick={() => {\n                    handleSelectedBranch()\n                }}></i>}\n                {!selectedBranch && <i className=\"far fa-square checkbox\" onClick={() => {\n                    handleSelectedBranch()\n                }}></i>}\n\n\n            </div>\n        )\n    }\n\n    function sendSuccess(msg) {\n        setInfo(true)\n        setSuccess(msg)\n        setTimeout(() => {\n            setInfo(false)\n            setSuccess(false)\n        }, 3000)\n    }\n\n    const saveNewName = () => {\n        tokenPatch(p.apiBase + '/branch', { id: branch._id, name: nBranchName }, p.token).then((d) => {\n            branch.name = d.name\n            sendSuccess('Name Changed')\n        })\n    }\n\n    function toggleGroup(group) {\n        // remove group from the branch \n        tokenPost(p.apiBase + '/branch/toggleGroup', { id: branch._id, group: group._id }, p.token).then((d) => {\n            setSGroups(d.groups)\n        })\n    }\n    function togglePerson(person) {\n        // remove group from the branch \n        tokenPost(p.apiBase + '/branch/togglePerson', { id: branch._id, person: person._id }, p.token).then((d) => {\n            console.log(d);\n            setSPeople(d.persons)\n        })\n    }\n\n    function getSelectedGroups() {\n        return (\n            <div className={getCls('selectedGroups')}>\n                {!selGroupLoading && <div>\n                    {sGroups.map(group => (\n                        <div\n                            key={group._id}\n                            className={getCls('group0')}\n                            onClick={() => { toggleGroup(group) }}\n                        >\n                            <span className={getCls('v04TWL')}><i className=\"fas fa-check\"></i></span>\n                            <span className='grGP'>{group.name}</span>\n                        </div>\n                    ))}\n                </div>}\n\n            </div>\n        )\n    }\n\n    function getSelectedPeople() {\n        return (\n            <div className={getCls('selectedGroups')}>\n                {!selPeopleLoading && <div>\n                    {sPeople.map(group => (\n                        <div\n                            key={group._id}\n                            className={getCls('group0')}\n                            onClick={() => { togglePerson(group) }}\n                        >\n                            <span className={getCls('v04TWL')}><i className=\"fas fa-check\"></i></span>\n                            <span className='grGP'>{group.fname}</span>\n                        </div>\n                    ))}\n                </div>}\n\n            </div>\n        )\n    }\n\n    function groupEditChange(e) {\n        const val = e.target.value\n        setNGroupName(val)\n        // get all groups from the db .\n        tokenGet(p.apiBase + '/group/search?q=' + val, { token: p.token }).then((d) => {\n            setRGroups(d)\n            console.log(d)\n        })\n    }\n    function personEditChange(e) {\n        const val = e.target.value\n        setNPersonName(val)\n        // get all groups from the db .\n        tokenGet(p.apiBase + '/person/search?q=' + val, { token: p.token }).then((d) => {\n            setRPeople(d)\n        })\n    }\n\n    function handleNewGroup(group) {\n        // toggle group to branch \n        toggleGroup(group)\n    }\n    function handleNewPerson(person) {\n        // toggle group to branch\n        togglePerson(person)\n    }\n\n    function handleNewInputGroup() {\n        tokenPost(p.apiBase + '/group', { name: nGroupName }, p.token).then((d) => {\n            const temp = sGroups\n            temp.push(d)\n            setSGroups(temp)\n        }\n        )\n    }\n    function handleNewInputPerson() {\n        tokenPost(p.apiBase + '/person', { fname: nPersonName }, p.token).then((d) => {\n            const temp = sPeople\n            temp.push(d)\n            setSPeople(temp)\n        }\n        )\n    }\n\n    function getInputGroups() {\n        return (\n            <div className={getCls('kdW3')}>\n                {/* input form */}\n                <div className={getCls('form')}>\n                    <Input1 value={nGroupName} placeholder='group name' type='text' onChange={(e) => { groupEditChange(e) }} />\n                    <span className={getCls('lRb4')} onClick={handleNewInputGroup}>New</span>\n                </div>\n                {/* result container */}\n                <div className={getCls('result')}>\n                    {rGroups && rGroups.length > 0 && rGroups.map(g => (\n                        <div key={g._id} className='GV' onClick={() => { handleNewGroup(g) }}>\n                            {g.name}\n                        </div>\n                    ))}\n                </div>\n            </div>\n        )\n    }\n    function getInputPeople() {\n        return (\n            <div className={getCls('kdW3')}>\n                {/* input form */}\n                <div className={getCls('form')}>\n                    <Input1 value={nPersonName} placeholder='person name' type='text' onChange={(e) => { personEditChange(e) }} />\n                    <span className={getCls('lRb4')}\n                        onClick={() => { handleNewInputPerson() }}>New</span>\n                </div>\n                {/* result container */}\n                <div className={getCls('result')}>\n                    {rPeople.map(g => (\n                        <div key={g._id} className='GV' onClick={() => { handleNewPerson(g) }}>\n                            {g.fname}\n                        </div>\n                    ))}\n                </div>\n            </div>\n        )\n    }\n\n    function getGroupsSection() {\n        // selected groups section\n        return (\n            <div className={getCls('OcnAq')}>\n                {getSelectedGroups()}\n                {getInputGroups()}\n            </div>\n        )\n    }\n\n    function getPeopleSection() {\n        // selected groups section\n        return (\n            <div className={getCls('OcnAq')}>\n                {getSelectedPeople()}\n                {getInputPeople()}\n            </div>\n        )\n    }\n\n    const setDir = () => {\n        if (branch.lang === 'ar') return 'rtl'\n        else return 'ltr'\n    }\n    const setTextAlign = () => {\n        if (branch.lang === 'ar') return 'right'\n        else return 'left'\n    }\n\n    const handleNameChange = (e) => {\n        setNBranchName(e.target.innerText)\n    }\n\n    const getExMenu = () => {\n        return (\n            <div className={getCls('wrapper1')}>\n                {/* close icon */}\n                <i onClick={branchExMenu} className=\"far fa-times-circle branch-action\"></i>\n                {info && <div className={getCls('info-section')}>\n                    {error && <div className={getCls('error-section')}>\n                        {error}\n                    </div>}\n                    {success && <div className={getCls('success-section')}>\n                        {success}\n                    </div>}\n                </div>}\n                {/* name change */}\n                <div className={getCls('input') + ' exMenuItem newNameEdit'}>\n\n                    {/* <Input1 p={p} placeholder={branch.name} value={nBranchName} onChange={(e) => { setNBranchName(e.target.value) }} /> */}\n\n                    <div className={getCls('edit-branch-wrapper')}>\n                        <div className={getCls('edit-container')}>\n                            <div contentEditable=\"true\" id=\"branchName\" className=\"input-name\" onInput={(e) => handleNameChange(e)} style=\n                                {\n                                    { direction: `${setDir()}`, textAlign: `${setTextAlign()}` }}>\n                                {oldBName}\n                            </div>\n                        </div>\n\n                        <div className={getCls('submit-edit')}>\n                            <span className={getCls('submitBranchName')} onClick={() => { saveNewName() }}>Save</span>\n                        </div>\n                    </div>\n\n\n                </div>\n                {/* pinned change */}\n                <div className={getCls('pinned') + ' exMenuItem'}>\n                    {getPinned()}\n                </div>\n                {/* positive change */}\n                <div className={getCls('positive') + ' exMenuItem'}>\n                    {getPositive()}\n                </div>\n                {/* groups change */}\n                <div className={getCls('groups')}>\n                    <span><b>Groups</b></span>\n                    {getGroupsSection()}\n                </div>\n                <div className={getCls('people')}>\n                    <span><b>People</b></span>\n                    {getPeopleSection()}\n                </div>\n                {/* TODO Groups Tags and People */}\n            </div>\n        )\n    }\n\n    const gBranchActions = () => {\n        return (\n            <div className={getCls('actions-container')}>\n                {p.branchesListIsBranchMenu &&\n                    <div className={getCls('wrapper0')}>\n                        {!isExMenu && getRootActions()}\n                        {isExMenu && getExMenu()}\n                    </div>\n                }\n            </div>\n        )\n    }\n\n    return (\n        <div className={getCls('branch-container')} style={{ marginBottom: p.branchMargin, backgroundColor: p.branchBKColor }}>\n            {getBranch()}\n            {gBranchActions()}\n        </div>\n    )\n}\n\n\nasync function deleteFunc(url = '') {\n    // Default options are marked with *\n    const response = await fetch(url, {\n        method: 'DELETE', // *GET, POST, PUT, DELETE, etc.\n        mode: 'cors', // no-cors, *cors, same-origin\n        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n        credentials: 'same-origin', // include, *same-origin, omit\n        redirect: 'follow', // manual, *follow, error\n        referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n    });\n    return response.json(); // parses JSON response into native JavaScript objects\n}\n\n\nexport default Single\n"]},"metadata":{},"sourceType":"module"}